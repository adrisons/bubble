<div *ngIf="true" class="col-lg-3 col-md-3 col-sm-12 sidebar">
  <div class="content">
    <div class="title">Filters</div>
    <div class="list-group">
      <input class="list-group-item" placeholder="Name" [(ngModel)]="filters.name">
      <input class="list-group-item" placeholder="Message" [(ngModel)]="filters.message">
    </div>
    <div class="btn-group" data-toggle="buttons">
      <label [ngClass]="{'btn btn-secondary': true, 'active': filters.social.twitter}">
        <input type="checkbox" [(ngModel)]="filters.social.twitter" autocomplete="off">
        <i class="fa fa-twitter"></i>
      </label>
      <label [ngClass]="{'btn btn-secondary': true, 'active': filters.social.facebook}">
        <input type="checkbox" [(ngModel)]="filters.social.facebook" autocomplete="off">
        <i class="fa fa-facebook"></i>
      </label>
    </div>
  </div>
  <!-- <button type="submit" [ngClass]="{' btn': true}" [disabled]="!loginForm.form.valid">Filter</button> -->

</div>


<div class="dashboard col-lg-7 col-md-9 col-sm-12">

  <div>
    <button type="button" class="post" (click)="showPost = !showPost">
      <i class="fa fa-plus fa-1x" aria-hidden="true"></i>
    </button>

    <div *ngIf="showPost" class="post">
      <app-post></app-post>
    </div>


    <button type="button" class="refresh" (click)="getTimeline()">
      <i class="fa fa-refresh" aria-hidden="true"></i>
    </button>
    <div *ngFor="let message of timeline | user : filters.name | message: filters.message | social: filters.social | notEmpty | sortBy: 'date'">
      <div class="card">
        <div class="header">

          <a href="{{message.user.url}}" target="_blank">
            <img class="img" src={{message.user.img}} alt="User">
          </a>

          <div class="info">
            <label class="title user">{{message.user.name}}</label>
            <label class="subtitle date">{{message.date}}</label>
          </div>

          <div class="social-logo">
            <a href="{{message.link}}" target="_blank" [ngClass]="{'fa fa-facebook fa-1x facebook': message.socialType.name === 'facebook'}"></a>
            <a href="{{message.link}}" target="_blank" [ngClass]="{'fa fa-twitter fa-1x twitter': message.socialType.name === 'twitter'}"></a>
          </div>

        </div>
        <div class="body">
          <p *ngIf="message.text" class="comment">{{message.text}}</p>
          <!-- <div [ngSwitch]="m.type">
          </div> -->
          <div *ngFor="let m of message.media">
            <div [ngSwitch]="message.type">

              <!-- Video -->
              <div class="media" *ngSwitchCase="1" >
                <iframe *ngIf="m.video" [src]="m.video | safeurl">
                </iframe>
                <!-- <video *ngIf="m.video" controls>
                    <source [src]="m.video | safeurl">
                </video> -->
              </div>

              <div class="media" *ngSwitchDefault>
                <a *ngIf="m.img"  href="{{m.url}}" target="_blank">
                  <img class="data img"  src={{m.img}}>
                </a>
              </div>

            </div>
            <!-- <a class="data" *ngIf="!m.video" href="{{m.url}}" target="_blank">
              <img class="img" src={{m.img}}>
            </a> -->
            <!-- <video class="data" *ngIf="m.video" class="data"  controls>
              <source  [src]="m.video | safeurl">
            </video> -->
            <!-- <iframe class="data" *ngIf="m.video"  [src]="m.video | safeurl">
            </iframe> -->
          </div>

        </div>
        <div class="buttons">
          <a class="card-link" (click)="likeToggle(message)">
            <i [ngClass]="{'liked': message.flags.like, 'fa fa-heart': true}" aria-hidden="true"></i>
          </a>

          <a class="card-link" (click)="share(message)">
            <i [ngClass]="{'shared': message.flags.share, 'fa fa-retweet': true}" aria-hidden="true"></i>
          </a>
          <a class="card-link" (click)="commentToggle(message)">
            <i [ngClass]="{'comment': message.flags.comment, 'fa fa-comment': true}" aria-hidden="true"></i>
          </a>

        </div>
        <div *ngIf="message.flags.comment" class="reply">
          <form (ngSubmit)="onReply(replyForm)" #replyForm="ngForm">
            <div class="form-group input-group">
              <textarea type="text" name="comment" class="form-control custom-control" style="resize:none" rows="3" placeholder="Message"
                [(ngModel)]="comment" required></textarea>
              <span class="input-group-addon">
                <button type="submit" class="button-right btn" [disabled]="!replyForm.form.valid || !replyForm.form.dirty">Reply</button>
              </span>
            </div>

          </form>
        </div>

      </div>

    </div>
  </div>

</div>
